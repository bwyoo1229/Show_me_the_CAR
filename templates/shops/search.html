{% extends 'base.html' %}

{% block page_name %}
    Detail
{% endblock page_name %}

{% block content %}

<div>현재 사용자: {{ user.username }}</div>
    <form method="get" action="{% url 'shops:search'%}"></form>
    {{form.as_p}}
    <button>Search</button>
    {% for shop in shops %}
        <div>
            <a href="{% url 'shops:give_rating' shop.id %}">{{ shop.name }}</a>
            <!-- 좋아요 기능, user가 heart를 눌렀을 때, 대리점의 like_users list에 있으면 list에서 삭제되고 없으면 추가된다 -->
            <a href="{% url 'shops:like' shop.id %}">
              {% if user in shop.like_users.all %}
                <a href="{% url 'shops:like' shop.id %}"><i class="fas fa-heart"></i></a>
              {% else %}
                <a href="{% url 'shops:like' shop.id %}"><i class="far fa-heart"></i></a>
              {% endif %}
            </a>
        </div>
    {% endfor %}
    <h5>
    {% if page_obj.has_previous %}
        <a href="?page={{page_obj.previous_page_number}}">Previous</a>
    {% endif %}

    Page {{page_obj.number}} of {{page_obj.paginator.num_pages}}

    {% if page_obj.has_next  %}
        <a href="?page={{page_obj.next_page_number}}">Next</a>
    {% endif %}


    </h5>
{% endblock %}